var last_path=window.location.pathname,stateObj={foo:"bar"},menu_bottom=main_nav.offsetHeight,menu_top=0,scrll_old=window.pageYOffset,scrll=window.pageYOffset;function update_in_arefs(){var b=document.getElementsByTagName("a");for(var a=0;a<b.length;a++){if(b[a].getAttribute("href")[0]=="/"){if(!b[a].classList.contains("no_aj")){b[a].addEventListener("click",aref_click)}}}}function aref_click(a){a.preventDefault();hrf=this.getAttribute("href");navigate(hrf);if(hrf[0]!="#"){window.history.pushState(stateObj,null,hrf)}}function navigate(a){if(a[0]!="#"){var b="";_hash=a.indexOf("#");if(~_hash){_hash=a.substring(_hash);a=a.substring(0,_hash)}for(var c=0;c<a.length;c++){if((c==0)&&(a[c]!="/")){b+=a[c]}else{if(c>0){b+=a[c]}}}if((a[a.length-1]!="l")&&(a[a.length-1]!="m")){b+="/index.html"}if(b=="/index.html"){b="index.html"}var d="name=get_page&page="+b;var e=new XMLHttpRequest();e.open("POST","/work.php?",true);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.send(d);e.onreadystatechange=function(){if(e.readyState!=4){return}if(e.status!=200){console.log("smbf_wrong")}else{document.getElementsByTagName("main")[0].innerHTML=e.responseText;update_in_arefs();last_path=window.location.pathname;if(~_hash){window.location.hash=_hash;_hash=_hash.substring(1);document.getElementById(_hash).scrollIntoView()}else{window.scrollTo(0,0)}}}}}window.addEventListener("popstate",function(a){if(last_path!=window.location.pathname){navigate(window.location.pathname+window.location.hash)}last_path=window.location.pathname},false);function append_menu(){update_in_arefs();window.onscroll=scroll}function scroll(){scrll=window.pageYOffset;menu_top=(scrll<scrll_old)?(menu_top<0)?menu_top+scrll_old-scrll:0:(menu_top>-menu_bottom)?menu_top+scrll_old-scrll:-menu_bottom;menu_top=menu_top<-menu_bottom?-menu_bottom:menu_top>0?0:menu_top;main_nav.setAttribute("style","top:"+menu_top+"px");scrll_old=scrll}window.onload=append_menu;